<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Bank of Migs</title>
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="./build/css/style.css"/>
</head>
<body>
	<h1 class="user">Lalisson</h1>
	<table class="transitions">
	  <tr>
	    <td><h2>Date</h2></td> 
	    <td><h2>Description</h2></td>
	    <td><h2>Valor</h2></td>
	    <td><h2>Migo</h2></td>
	  </tr>
  </table>

  <button id="add-button" class="btn-floating btn-large waves-effect waves-light red">
    <i class="material-icons">add</i>
  </button>

  <form id="form-add">
    <input type="hidden" name="sender" value="larrison"/>
    <label>
      Data
      <input type="text" name="date">
    </label>
    <label>
      Descrição
      <input type="text" name="description">
    </label>
    <label>
      Valor
      <input type="text" name="value">
    </label>
    <label>
      Dar dinheiro para:
      <select name="receiver">
        <option value="flora">Flora</option>
        <option value="edinho">Edinho</option>
      </select>
    </label>
    <button>Adicionar</button>
    <div class="feedback"></div>
  </form>

  <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script type="text/javascript" src="./node_modules/materialize-css/dist/js/materialize.js"></script>
  <script type="text/javascript" src="./build/js/script.js"></script>
  <script type="text/javascript">

    $('#form-add').submit(function(e) {
      e.preventDefault();

      var form = $(this);
      var data = form.serialize();

      $.post('http://192.168.1.29:5000/transaction/', data, function(response) {
        form.find('.feedback').text('Adicionado :) |||| ' + data.toString() + ' |||| ' + response);
      })

    });

    $('.delete').on('click', function(e) {
      var button = $(e.currentTarget);
      var id = button.attr('transaction-id');

      $.post('.', id, function(response) {
        console.log(response);
        console.log(button.closest('tr').remove());
      })
    });

    $('#add-button').on('click', function() {
      $('#form-add').addClass('show');
    })

  </script>
</body>
